<div *ngIf="(AfterOnlineCheckAuth | async) as onlineAndAuthReady; else onlineAndAuthNotReady">
    <mat-sidenav-container fxFlex="100vw">
        <mat-sidenav-content fxLayout="column">
            <mat-toolbar color="primary">
                <mat-icon style="margin-right:20px;" *ngIf="!drawer.opened" (click)="drawer.toggle()">
                    menu
                </mat-icon>
                <h1>
                    StepsWise Tracking Tool
                </h1>

                <span fxFlex="grow"></span>

                <div fxHide.lt-sm>
                    Welcome {{myuserProfile.userAuthenObj?.displayName}}!
                </div>
                <button mat-icon-button>

                    <fa-icon (click)="componentLogOff()" class="fas faSignOutAlt fa-lg"
                        [icon]="['fas', 'sign-out-alt']">
                    </fa-icon>

                </button>


            </mat-toolbar>
            <div class="container-wrapper">
                <div fxLayout="row wrap" fxLayoutAlign="space-around center">
                    <div fxLayout="column" fxFlex="20vw" fxFlex.lt-sm="60vw" Style="padding-bottom:10vh;"
                        fxLayoutGap="10px">
                        <h4>{{myuserProfile.myusrinfoFromDb?.projectName}}</h4>
                        <mat-form-field appearance="fill"
                            *ngIf="(Sections | async) as SectionsReady; else SectionsnotReady">
                            <mat-label>{{myprojectVariables?.initialMainSection}}</mat-label>
                            <mat-select [formControl]="myprojectControls?.subsectionkeysControl">
                                <mat-optgroup *ngFor="let group of SectionsReady" [label]="group.name"
                                    [disabled]="group.disabled">
                                    <mat-option *ngFor="let mysection of group.section"
                                        [value]="{value: mysection.viewvalue, groupValue: group.name}">
                                        {{mysection.viewvalue}}
                                    </mat-option>
                                </mat-optgroup>
                            </mat-select>
                        </mat-form-field>
                        <ng-template #SectionsnotReady>

                            <div *ngIf="(Sections | async) === undefined">
                                <div fxLayoutAlign="center center" style="height:100vh;">
                                    <mat-spinner [diameter]="30" Style="margin-left:10px;"></mat-spinner>
                                </div>
                            </div>
                            <div *ngIf="(Sections | async) === null">
                                <mat-card class="list" *ngIf="myprojectFlags.newuserCheck === false" fxLayout="row wrap"
                                    fxLayout.lt-sm="column" fxLayoutAlign="space-around center">
                                    <mat-card-content class="empty-label">
                                        Do You want to Add Default Keys?</mat-card-content>
                                    <mat-card-actions>
                                        <button mat-raised-button color="primary" (click)="CreateDefaultKeys()">New
                                            Account</button>
                                    </mat-card-actions>
                                </mat-card>
                                <mat-card class="list" *ngIf="myprojectFlags.newuserCheck === true" fxLayout="row wrap"
                                    fxLayout.lt-sm="column" fxLayoutAlign="space-around center">
                                    <mat-card-content class="empty-label">
                                        Do You want to create Demo Account?</mat-card-content>
                                    <mat-card-actions>
                                        <button mat-raised-button color="primary" (click)="CreateAccount()">New
                                            Account</button>
                                    </mat-card-actions>
                                </mat-card>
                            </div>

                        </ng-template>
                        <button mat-raised-button color="primary"
                            *ngIf="myprojectFlags?.showPaymentpage === false && myuserProfile.myusrinfoFromDb?.projectOwner === true  && myprojectControls?.subsectionkeysControl.valid"
                            [disabled]="myprojectFlags?.firstTestcaseEdit === true " (click)="AddNew()">Add</button>
                        <form class="example-form" *ngIf="myprojectFlags?.firstTestcaseEdit === true" fxLayout="column"
                            fxLayoutGap="10px">
                            <mat-form-field appearance="fill">
                                <mat-label>Enter New Task Name</mat-label>
                                <input matInput placeholder="Services or Directives"
                                    [formControl]="myprojectControls?.createTestcaseControl">
                                <mat-hint>Unique Name!</mat-hint>
                            </mat-form-field>
                            <button mat-raised-button color="primary" (click)="saveTC()"
                                [disabled]="!(myprojectControls?.createTestcaseControl.value)">Save</button>
                            <button mat-raised-button color="warn" (click)="exitTC()">Cancel</button>
                        </form>
                        <button mat-raised-button color="accent"
                            [fxShow]="myprojectFlags?.showPaymentpage === false && myuserProfile.myusrinfoFromDb?.projectOwner === true && myprojectFlags?.firstTestcaseEdit === false && myprojectControls?.subsectionkeysControl.valid && myprojectVariables.testcaseslength > 0"
                            [disabled]="myprojectFlags?.showEditTcButton !== true" (click)="openedit()">Edit</button>
                        <button mat-raised-button color="warn"
                            [fxShow]="myprojectFlags?.showPaymentpage === false && myuserProfile.myusrinfoFromDb?.projectOwner === true && myprojectFlags?.firstTestcaseEdit === false && myprojectControls?.subsectionkeysControl.valid && myprojectVariables.testcaseslength > 0 "
                            [disabled]="myprojectFlags?.showEditTcButton !== true" (click)="Delete()">Delete</button>
                    </div>
                    <div fxLayout="column" fxFlex="60vw" fxFlex.lt-sm="80vw" Style="padding-bottom:50px;">

                        <h1 *ngIf="myprojectVariables.viewSelectedTestcase === undefined ">Task Steps</h1>
                        <h1 *ngIf="myprojectVariables.viewSelectedTestcase !== undefined">
                            {{myprojectVariables.viewSelectedTestcase?.heading}} </h1>
                        <mat-form-field appearance="fill">
                            <mat-label>{{myprojectVariables.viewSelectedTestcase?.subHeading}}</mat-label>
                            <mat-label *ngIf="myprojectVariables.viewSelectedTestcase === undefined"
                                style="font-size: 24px;">
                                Select Task Now!
                            </mat-label>
                            <textarea matInput cdkTextareaAutosize cdkAutosizeMinRows="15" cdkAutosizeMaxRows="50"
                                fxFlex="grow" style="overflow-x: hidden;"
                                [formControl]="myprojectControls?.testcaseInfoControl" readonly>

                    </textarea>
                        </mat-form-field>
                    </div>
                </div>
                <div fxLayout="column" *ngIf="(SectionTc | async) as SectionTcReady; else SectionTcnotReady">
                    <h2>Services and Directives</h2>
                    <div>
                    <mat-card class="list" fxFlex="95vw" fxLayout="row wrap" fxLayout.lt-sm="column"
                        fxLayoutAlign="space-around center">
                        <app-task-show ngStyle.lt-sm="width:60vw;" fxLayoutAlign.lt-sm="space-between center"
                            fxLayoutAlign="space-between center" fxLayoutGap="10px" *ngFor="let task of SectionTcReady "
                            [task]="task" (toshow)="refreshList($event)"></app-task-show>
                    </mat-card>
                    </div>
                </div>
                <ng-template #SectionTcnotReady>
                    <div *ngIf="(SectionTc | async) === undefined">
                        <mat-card class="list" style="max-width:95vw;" fxLayout="row wrap" fxLayout.lt-sm="column"
                            fxLayoutAlign="space-around center">
                            <p class="empty-label">
                                Empty list</p>
                        </mat-card>
                    </div>
                </ng-template>
            </div>
        </mat-sidenav-content>
        <mat-sidenav #drawer class="drawer" mode="side" opened="false" (opened)="draweropen()" fxFlex.lt-sm="100vw">
            <mat-toolbar class="header" color="warn">
                <div>Task keys Management</div>
                <span fxFlex="grow"></span>
                <mat-icon style="margin-right:20px;" class="close" (click)="drawerclose()">close</mat-icon>
            </mat-toolbar>
            <mat-tab-group>
                <mat-tab>
                    <ng-template mat-tab-label>Home</ng-template>
                    <ng-template matTabContent>
                        <app-publicproj [profileinfoUid]="myuserProfile?.userAuthenObj" [profileinfoProjName]="myuserProfile.myusrinfoFromDb.projectName" (toChangeCurrentProj)="saveCurrProject($event)"></app-publicproj>
                    </ng-template>
                </mat-tab>
                <mat-tab>
                    <ng-template mat-tab-label>Edit</ng-template>
                    <ng-template matTabContent>
                        <app-privateproj [profileinfoUid]="myuserProfile?.userAuthenObj"></app-privateproj>
                    </ng-template>
                </mat-tab>
            </mat-tab-group>
        </mat-sidenav>
    </mat-sidenav-container>


</div>
<ng-template #onlineAndAuthNotReady>
    <div *ngIf="(myonline | async) as myonlineReady; else myonlineNotReady">

        <div *ngIf="(myauth | async) as some; else myauthNotReady">
            <div fxLayoutAlign="center center" style="height:100vh;">
                Authentication Check Success!<mat-spinner [diameter]="30" Style="margin-left:10px;"></mat-spinner>
            </div>

        </div>
        <ng-template #myauthNotReady>

            <div *ngIf="(myauth | async) === undefined">
                <div fxLayoutAlign="center center" style="height:100vh;">
                    Waiting for Authentication!<mat-spinner [diameter]="30" Style="margin-left:10px;"></mat-spinner>
                </div>
            </div>
            <div *ngIf="(myauth | async) === null">
                <div fxLayoutAlign="center center" style="height:100vh;">
                    <mat-card class="example-card" fxFlex="30vw" fxFlex.lt-sm="80vw">
                        <mat-card-header>
                            <div mat-card-avatar class="example-header-image"></div>
                            <mat-card-title>Share Tasks</mat-card-title>
                            <mat-card-subtitle>Step by Step</mat-card-subtitle>
                        </mat-card-header>
                        <mat-card-content>
                            <div style="color:blue; padding:0px;">
                                <div fxLayout="column" fxLayoutAlign="space-around center"
                                    style="letter-spacing: 20px;">
                                    <h1> <strong style="font-size:30px">StepsWise Tracking Tool</strong> </h1>
                                    <h1> Analayze all the Steps of a Task </h1>
                                    <h1> Record all the Steps for Easy Tracking </h1>

                                </div>

                            </div>
                        </mat-card-content>
                        <mat-card-actions>
                            <div fxLayout="row " fxLayoutAlign="space-around center">
                                <mat-chip-list>
                                    <mat-chip style="font-size:2em; padding:10px;height: 60px !important;
            ">GLogin:</mat-chip>
                                </mat-chip-list>
                                <button mat-raised-button color="primary" (click)="developmentservice.login()"> Google
                                    login</button>
                            </div>
                        </mat-card-actions>
                    </mat-card>
                </div>
            </div>
        </ng-template>
    </div>

    <ng-template #myonlineNotReady>
        <div *ngIf="(myonline | async)==false">

            <div fxLayoutAlign="center center" style="height:100vh;">
                Lost Internet Connection!
            </div>
        </div>

        <div *ngIf="(myonline | async) === undefined">
            <div fxLayoutAlign="center center" style="height:100vh;">
                Checking for Internet!<mat-spinner [diameter]="30" Style="margin-left:10px;"></mat-spinner>
            </div>
        </div>

    </ng-template>
</ng-template>